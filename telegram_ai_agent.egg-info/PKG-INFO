Metadata-Version: 2.4
Name: telegram-ai-agent
Version: 0.1.0
Summary: Autonomous Telegram AI agent for private-question answering
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: telethon>=1.36.0
Requires-Dist: openai>=1.40.0
Requires-Dist: pydantic>=2.7.0
Requires-Dist: pydantic-settings>=2.3.0
Requires-Dist: aiosqlite>=0.20.0
Requires-Dist: tenacity>=8.3.0
Provides-Extra: dev
Requires-Dist: pytest>=8.2.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.23.0; extra == "dev"

# Telegram AI Agent (Private Question Responder)

A production-style Telegram agent that logs into your account, watches private chats, reasons over context, executes tools, and sends controlled answers.

## What this agent does

- Watches your incoming private messages in Telegram.
- Detects whether a message is a question worth answering.
- Runs a multi-step agent pipeline:
  - safety/policy checks
  - intent planning
  - optional tool execution (calculator, time, profile memory)
  - grounded response generation
- Persists conversation history and user profile hints in SQLite.
- Handles retries, rate limits, and duplicate message guards.

## Architecture

- `agent/telegram_gateway.py`: Telegram event ingestion and outgoing delivery.
- `agent/memory.py`: SQLite storage for messages, facts, and processed updates.
- `agent/policy.py`: hard safety and response eligibility checks.
- `agent/planner.py`: intent planning and tool routing using LLM JSON output.
- `agent/tools.py`: safe local tools.
- `agent/llm.py`: OpenAI wrapper with retries and JSON extraction.
- `agent/runtime.py`: orchestration pipeline and worker queue.
- `agent/app.py`: startup, wiring, and shutdown.

## Setup

1. Create Telegram app keys at [https://my.telegram.org](https://my.telegram.org).
2. Copy env template and fill values:

```bash
cp .env.example .env
```

3. Install dependencies:

```bash
python -m venv .venv
source .venv/bin/activate
pip install -e .[dev]
```

4. Start the agent:

```bash
telegram-agent
```

On first run, Telethon asks for your phone login and verification code.

## Safety notes

- This agent can send messages from your account. Test with a private sandbox contact first.
- `policy.py` blocks some high-risk content and caps message size.
- Extend `policy.py` and `prompts.py` before production use.

## Run tests

```bash
pytest
```

## Extend

- Add tools in `agent/tools.py` and register them in `ToolRegistry`.
- Add moderation or compliance webhooks in `agent/runtime.py` before sending.
- Add vector retrieval by extending `agent/memory.py`.
